<div *ngIf="notLoggedIn" class="joueur-container">
  <section class="not-logged-in-card card">
    <p>
      Tu n'es pas connecté. Connecte toi sur
      <a routerLink="/login">Connexion</a>
      pour voir tes informations joueur !
    </p>
  </section>
</div>

<!-- contenu quand un joueur est connecté -->
<div class="joueur-container" *ngIf="!notLoggedIn">
  <ng-container *ngIf="joueur; else loading">

    <section class="card profile-card">
      <h2>{{ joueur.pseudo }}</h2>
      <div class="stats">
        <div>
          <span class="value">{{ getPartiesJoueesCount() }}</span>
          <span class="label">Parties jouées</span>
        </div>
        <div>
          <span class="value">{{ getPartiesGagneesCount() }}</span>
          <span class="label">Parties gagnées</span>
        </div>
        <div>
          <span class="value">{{ getEnCoursCount() }}</span>
          <span class="label">En cours</span>
        </div>
        <div>
          <span class="value">{{ getTermineesCount() }}</span>
          <span class="label">Terminées</span>
        </div>
      </div>
    </section>

    <section class="card">
      <h2>Historique des Parties</h2>
      <ul class="game-list">
        <li *ngFor="let jp of joueurParties">
          <div class="info">
            <strong>Partie #{{ jp.partieId }}</strong>
            <span class="state">
              État : {{ jp.partie?.etat_partie ?? 'Inconnu' }}
              • Couleur : {{ jp.couleur }}
              <ng-container *ngIf="jp.classement !== null && jp.classement !== undefined">
                • Classement : {{ jp.classement }}
              </ng-container>
            </span>
          </div>
        </li>
      </ul>
    </section>

    <section class="card">
      <h2>Pions du joueur</h2>
      <ul class="game-list" *ngIf="pion && pion.length > 0; else noPions">
        <li *ngFor="let p of pion">
          <div class="info">
            <span> • Partie {{ p.joueurPartie?.partie?.id || 'Inconnue' }}</span>
            <span> • Couleur : {{ p.joueurPartie?.couleur || 'Inconnue' }}</span>
            <span> • État du pion : {{ p.etatPion }}</span>
          </div>
        </li>
      </ul>
      <ng-template #noPions>
        <p>Aucun pion trouvé pour ce joueur.</p>
      </ng-template>
    </section>
  </ng-container>

  <!-- page de chargement -->
  <ng-template #loading>
    <p>Chargement du joueur...</p>
  </ng-template>
</div>
